<h3 mat-dialog-title>Edit Bond - {{data.eq.securityName}}</h3>

<div *ngIf="!bondsGroup.valid" class="error">Numeric Fields Must be Positive</div>

<form [formGroup]="bondsGroup" method="post" (ngSubmit)="editBond(bondsGroup.value)" >

    <mat-dialog-content>
            <div class="formGroup">

                <mat-form-field appearance="outline" class="hidden-field" >
                    <input [(ngModel)]="data.eq.securityId" matInput hidden="true" formControlName="securityId">
                </mat-form-field>

                <div>
                    <mat-form-field appearance="outline">
                        <mat-label>Security Name</mat-label>
                        <input [(ngModel)]="data.eq.securityName" class="disabledInput" matInput type="text" placeholder="Security Name" formControlName="securityName" readonly>
                    </mat-form-field>
                </div>
                  
                <div>
                    <mat-form-field appearance="outline" id="description-field" >
                        <mat-label>Security Description</mat-label>
                        <input [(ngModel)]="data.eq.securityDescription" matInput type="text" placeholder="Security Description" formControlName="securityDescription">
                    </mat-form-field>
                </div>
                  
                <div>

                    <mat-form-field appearance="outline">
                        <mat-label>Coupon Rate</mat-label>
                        <input [(ngModel)]="data.eq.couponRate" matInput type="number" placeholder="Coupon Rate" formControlName="couponRate">
                    </mat-form-field>

                    <mat-form-field appearance="outline">
                        <mat-label>Is Callable?</mat-label>
                        <mat-select [(ngModel)]="data.eq.isCallable" formControlName="isCallable">
                          <mat-option [value]=true>YES</mat-option>
                          <mat-option [value]=false>NO</mat-option>
                        </mat-select>
                      </mat-form-field>
                    
                </div>
                  
                <div>
                    <mat-form-field appearance="outline">
                        <mat-label>Maturity Date</mat-label>
                        <input [ngModel]="getDateFromString(data.eq.maturityDate)" class="disabledInput" matInput type="date" placeholder="Maturity Date" formControlName="maturityDate">
                    </mat-form-field>

                    <mat-form-field appearance="outline">
                        <mat-label>Penultimate Coupon Date</mat-label>
                        <input [ngModel]="getDateFromString(data.eq.penultimateCouponDate)" matInput type="date" placeholder="Penultimate Coupon Date" formControlName="penultimateCouponDate">
                    </mat-form-field>
                </div>
                  
                <div>
                    <mat-form-field appearance="outline">
                        <mat-label>Ask Price</mat-label>
                        <input [(ngModel)]="data.eq.askPrice" matInput type="number" placeholder="Ask Price" formControlName="askPrice">
                    </mat-form-field>

                    <mat-form-field appearance="outline">
                        <mat-label>Bid Price</mat-label>
                        <input [(ngModel)]="data.eq.bidPrice" matInput type="number" placeholder="Bid Price" formControlName="bidPrice">
                    </mat-form-field>
                </div>
    
                <div>
                    <mat-form-field appearance="outline">
                      <mat-label>PF Credit Rating</mat-label>
                      <mat-select [(ngModel)]="data.eq.pfCreditRating" formControlName="pfCreditRating" (change)=CreditRating.update($event)>
                        <mat-option *ngFor="let rating of CreditRating.ratings" [value]="rating">
                            {{rating}}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                </div>
                  

            </div>
        </mat-dialog-content>

            <div class="formGroup">
                <mat-dialog-actions align="end">
                    <button mat-button mat-dialog-close color="primary">Cancel</button>
                    <button type="submit" [disabled]="!(bondsGroup.dirty && bondsGroup.valid)" mat-raised-button mat-dialog-close color="primary" >Edit</button>
                </mat-dialog-actions>
            </div>

        </form>